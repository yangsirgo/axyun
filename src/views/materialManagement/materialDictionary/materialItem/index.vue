<template>
  <div class="wrapper">
    <div class="float-left main">
      <div class="main_wrap">
        <flow-menu :patientCardType="patientCardType">
          <slot name="content">
            <div class="drugInfoMaintain width100 height100">
              <div class="left height100">
                <drug-list :refreshList="refreshList" @getIsDrug="getIsDrug" @newadd="newadd"></drug-list>
              </div>
              <div class="right height100">
                <drug-form ref="form" :drugForm="drugForm" @getRefreshList="getRefreshList"></drug-form>
              </div>
            </div>
          </slot>
        </flow-menu>
      </div>
    </div>
  </div>
</template>
<script>
import FlowMenu from "@/components/FlowMenu";
import drugList from "./components/drugList";
import drugForm from "./components/drugForm";
export default {
  components: { FlowMenu, drugList, drugForm },
  props: {
    // 患者卡片类型
    patientCardType: {
      type: String
    }
  },
  data() {
    return {
      //全局药品
      drugForm: {
        isnew: true
      },
      //刷新药品列表
      refreshList: {}
    };
  },
  watch: {},
  created() {

  },
  methods: {
    //获取子组件传来的药品id
    getIsDrug(data) {
      console.log('getIsDrug',data)
      if (data) {
        this.drugForm = data;
      }
    },
    //接收子组件返回来的刷新列表的信息
    getRefreshList(data) {
      console.log('getRefreshList',data)
      if (data) {
        this.refreshList = data;
      }
    },
    newadd() {
      this.drugForm = {
        isnew: true
      };
      this.$refs.form.newadd();
    }
  }
};
</script>
<style lang="scss" scoped>
.patient-card-container {
  margin-bottom: 20px;
  height: 66px;
  width: 100%;
}

.wrapper {
  padding: 0;
  height: 100%;
  overflow: hidden;
  .main {
    width: 100%;
    height: 100%;
    .main_wrap {
      height: 100%;
      .drugInfoMaintain {
        .left {
          width: calc(100% - 450px);
          float: left;
        }

        .right {
          width: 440px;
          margin-left: 10px;
          float: right;
        }
      }
    }
  }
}
</style>
