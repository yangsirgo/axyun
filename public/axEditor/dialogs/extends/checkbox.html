<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>下拉元素</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="generator" content="" />
    <link rel="stylesheet" href="css/ax.dialog.css" />
    <link rel="stylesheet" href="../../third-party/jquery-ui.min.css" />
    <link rel="stylesheet" href="../../third-party/pages/pagination.css" />
    <style>
      #toolbar {
        text-align: right;
      }
      .range-table td {
        text-align: center;
      }
      .range-table td input[type="text"] {
        width: 70px;
        height: 26px;
        padding: 0 5px;
      }
      .opt-icon {
        width: 16px;
        margin: 0 3px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <div class="well well-tooltip" id="tooltip">
        <table class="tooltip-table">
          <tr>
            <td class="first-td">定义</td>
            <td id="tooltipDefine" class="second-td"></td>
          </tr>
          <tr id="valueDomain">
            <td class="first-td">允许值域</td>
            <td class="second-td">
              <table id="tooltipValueDomain" class="tooltip-table" border="1">
                <tr>
                  <th>值</th>
                  <th>值含义</th>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </div>
      <form id="selectForm">
        <fieldset>
          <legend>基本属性</legend>
          <table>
            <tr>
              <td id="tooltipPoint">数据元</td>
              <td>
                <input
                  type="text"
                  id="metaData"
                  style="width:170px;margin-right: 10px;"
                /><img
                  title="列表查询"
                  style="vertical-align: -5px;cursor:pointer;"
                  src="images/search.png"
                  id="showMore"
                />
                <input type="hidden" id="metaDataId" />
                <input type="hidden" name="metaData" id="metaDataInfo" />
              </td>
            <!-- </tr>
            <tr> -->
              <td>元素编码</td>
              <td>
                <input
                  type="text"
                  autocomplete="off"
                  name="id"
                  id="id"
                  readonly
                />
              </td>
            </tr>
            <tr>
              <td>元素名称</td>
              <td>
                <input
                  type="text"
                  autocomplete="off"
                  name="name"
                  id="name"
                  style="width: 115px;"
                />
                <select
                  name="namepos"
                  id="namepos"
                  class="namepos"
                  style="width: 80px;"
                >
                  <option value="hidden" selected>隐藏</option>
                  <option value="left">居左</option>
                  <option value="right">居右</option>
                </select>
              </td>
            <!-- </tr>
            <tr> -->
              <td>占位文本</td>
              <td>
                <input
                  type="text"
                  autocomplete="off"
                  name="placeholderText"
                  id="placeholderText"
                />
              </td>
            </tr>
            <tr>
              <td>提示文本</td>
              <td>
                <input
                  type="text"
                  autocomplete="off"
                  name="tipText"
                  id="tipText"
                />
              </td>
            </tr>
            <!-- <tr>
                    <td>前缀</td>
                    <td><input type="text" autocomplete="off" name="prefix"></td>
                    <td>后缀</td>
                    <td><input type="text" autocomplete="off" name="suffix"></td>
                </tr> -->
            <!--<tr id="defaultValTr">-->
            <!--<td>默认值</td>-->
            <!--<td colspan="3">-->
            <!--<input type="text" autocomplete="off" name="defaultVal" id="defaultVal">-->
            <!--</td>-->
            <!--</tr>-->
          </table>
        </fieldset>
        <fieldset>
          <legend>勾选属性</legend>
          <ul class="checkSettings">
            <li>
              <input type="checkbox" name="readonly" id="readonly" />
              <label for="readonly">只读</label>
            </li>
            <li>
              <input type="checkbox" name="isSecret" id="isSecret" />
              <label for="isSecret">保密</label>
            </li>
            <li>
              <input type="checkbox" name="isDel" id="isDel" checked />
              <label for="isDel">可删除</label>
            </li>
            <!-- <li>
                    <input type="checkbox" name="showBorder" id="showBorder" checked>
                    <label for="showBorder">显示边框</label>
                </li> -->
            <li>
              <input type="checkbox" name="isHide" id="isHide" />
              <label for="isHide">隐藏</label>
            </li>
            <li>
              <input type="checkbox" name="quot" id="quot" />
              <label for="quot">引用</label>
            </li>
            <li>
              <input type="checkbox" name="source" id="source" />
              <label for="source">源</label>
            </li>
            <li>
              <input type="checkbox" name="isEmpty" id="isEmpty" checked />
              <label for="isEmpty">可为空</label>
            </li>
            <li>
              <input type="checkbox" name="isPrint" id="isPrint" checked />
              <label for="isPrint">可打印</label>
            </li>
            <li class="selectAndMultiShow">
              <input type="checkbox" name="isEdit" id="isEdit" />
              <label for="isEdit">可编辑</label>
            </li>
            <li>
              <input type="checkbox" name="checkDirectCite" id="checkDirectCite" checked />
              <label for="checkDirectCite">直接引用</label>
            </li>
          </ul>
        </fieldset>
        <fieldset>
          <legend>边框设置</legend>
          <div>
            <span class="label">显示类型: </span>
            <input
              type="radio"
              name="borderType"
              id="underline"
              value="underline"
            />
            <label for="underline">下划线</label>
            <input type="radio" name="borderType" id="border" value="border"
            checked />
            <label for="border">边框</label>
            <input type="radio" name="borderType" id="border" value="none" />
            <label for="none">隐藏</label>
          </div>
          <div id="borderType">
            <span class="label">边框类型: </span>
            <select
              name="borderStyle"
              id="borderStyle"
              class="borderStyle"
              style="width: 100px;"
            >
              <option value="0" selected>[]</option>
              <option value="1">{}</option>
              <option value="2">“”</option>
            </select>
          </div>
          <div id="borderHolder">
            <label for="stainholder">边框是否占位</label>
            <input type="checkbox" name="stainholder" id="stainholder" />
          </div>
        </fieldset>
        <fieldset class="checkboxRadioShow">
          <legend>展示方向</legend>
          <span class="setting-box setting-box-dayin1">
            <input
              type="radio"
              name="direction"
              checked
              value="0"
              id="horizon"
            />
            <label for="horizon">横向</label>
          </span>
          <span class="setting-box">
            <input type="radio" name="direction" value="1" id="vertical" />
            <label for="vertical">纵向</label>
          </span>
        </fieldset>
        <fieldset>
          <legend>类型转换</legend>
          <span class="setting-box" id="checkbox-part">
            <input
              type="radio"
              onchange="inputTypeChange(this)"
              name="transferType"
              value="radio"
              id="transferRadio"
            />
            <label for="transferRadio">单选元素</label>
          </span>
          <span class="setting-box" id="checkbox-part">
            <input
              type="radio"
              onchange="inputTypeChange(this)"
              name="transferType"
              value="checkbox"
              id="transferCheckboxs"
            />
            <label for="transferCheckboxs">多选元素</label>
          </span>
          <span class="setting-box" id="select-part">
            <input
              type="radio"
              onchange="inputTypeChange(this)"
              name="transferType"
              value="select"
              id="transferSelect"
            />
            <label for="transferSelect">下拉单选元素</label>
          </span>
          <span class="setting-box" id="selectmulti-part">
            <input
              type="radio"
              onchange="inputTypeChange(this)"
              name="transferType"
              value="selectmulti"
              id="transferMultiSelect"
            />
            <label for="transferMultiSelect">下拉多选元素</label>
          </span>
        </fieldset>
        <fieldset id="insertPart">
          <legend>专有属性</legend>
          <span class="setting-box">
            <input
              type="radio"
              name="isRange"
              id="isDictRange"
              value="isDictRange"
            />
            <label for="isDictRange">字典值域</label>
          </span>
          <span class="setting-box">
            <input
              type="radio"
              name="isRange"
              id="isCustRange"
              value="isCustRange"
              checked
            />
            <label for="isCustRange">自定义值域</label>
          </span>
          <div id="toolbar">
            <a href="javascript:void(0);" onclick="fnAdd()">添加</a>
          </div>
          <table class="range-table border" id="options_table">
            <tr>
              <th width="40">序号</th>
              <th width="96">值</th>
              <th width="96">含义</th>
              <th width="96">分值</th>
              <th width="96">打印值</th>
              <th width="68">设为默认</th>
              <th width="100">操作</th>
            </tr>
          </table>
        </fieldset>
        <fieldset>
          <legend>级联属性</legend>
          <span>
            <input
              type="text"
              autocomplete="off"
              name="cascadeId"
              id="cascadeId"
              placeholder="级联来源（上级元素编码）"
              value=""
            />
          </span>
          <span>
            <select name="operator" id="operator" class="operator">
              <option value="=">等于</option>
              <option value="!=">不等于</option>
              <option value=">">大于</option>
              <option value=">=">大于等于</option>
              <option value="<">小于</option>
              <option value="<=">小于等于</option>
              <option value="in">包含</option>
              <option value="null">为空</option>
              <option value="notNull">不为空</option>
            </select>
          </span>
          <span>
            <input
              type="text"
              autocomplete="off"
              name="showCondition"
              id="showCondition"
              placeholder="显示条件（写入级联来源的含义）"
              value=""
            />
          </span>
        </fieldset>
        <fieldset>
          <legend>不可用条件</legend>
          <span>
            <input
              type="text"
              autocomplete="off"
              name="disabledId"
              id="disabledId"
              placeholder="级联来源（上级元素编码）"
              value=""
              style="width: 165px"
            />
          </span>
          <span>
            <select name="disabledOperator" id="disabledOperator" class="disabledOperator" style="width: 74px">
              <option value="=">等于</option>
              <option value="!=">不等于</option>
              <option value=">">大于</option>
              <option value=">=">大于等于</option>
              <option value="<">小于</option>
              <option value="<=">小于等于</option>
              <option value="in">包含</option>
              <option value="null">为空</option>
              <option value="notNull">不为空</option>
            </select>
          </span>
          <span>
            <input
              type="text"
              autocomplete="off"
              name="disabledCondition"
              id="disabledCondition"
              placeholder="不可用条件"
              value=""
            />
          </span>
          <span>
            <select name="clearValue" id="clearValue" class="clearValue" style="width: 74px">
              <option value="yes">清空选中</option>
              <option value="no">不清空选中</option>
            </select>
          </span>
        </fieldset>
      </form>
    </div>
    <script src="../../third-party/jquery-1.10.2.min.js"></script>
    <script src="../../third-party/jquery-ui.min.js"></script>
    <script src="../../third-party/pages/pagination.min.js"></script>
    <script src="../../third-party/tooltip/jquery.popupoverlay.js"></script>
    <script src="../internal.js"></script>
    <script src="js/ranges.js"></script>
    <script src="js/metadata.js"></script>
    <script src="js/baseElement.js"></script>
    <script type="text/javascript">
      // var formName = 'checkboxForm',thePlugins = 'checkbox',pluginCode='05';
      var search = window.location.search;
      var formName = getSearchString("formName", search);
      var thePlugins = getSearchString("thePlugins", search);
      var pluginCode = getSearchString("pluginCode", search);
      $("form").attr("id", formName);
      $("input[name='transferType'][value='"+thePlugins+"']").prop("checked", true);
      changeDom(thePlugins);
      //key(需要检索的键） url（传入的需要分割的url地址，例：?id=2&age=18）
      function getSearchString(key, Url) {
        var str = Url;
        str = str.substring(1, str.length); // 获取URL中?之后的字符（去掉第一位的问号）
        // 以&分隔字符串，获得类似name=xiaoli这样的元素数组
        var arr = str.split("&");
        var obj = new Object();
        // 将每一个数组元素以=分隔并赋给obj对象
        for (var i = 0; i < arr.length; i++) {
          var tmp_arr = arr[i].split("=");
          obj[decodeURIComponent(tmp_arr[0])] = decodeURIComponent(tmp_arr[1]);
        }
        return obj[key];
      }
      function inputTypeChange(that) {
        changeDom($(that).val());
      }
      function changeDom(thePlugin) {
        if (thePlugin === "checkbox") {
          $(".selectMultiShow").hide();
          $(".selectAndMultiShow").hide();
          $(".checkboxRadioShow").show();
          formName = "checkboxForm";
        } else if (thePlugin === "radio") {
          $(".selectMultiShow").hide();
          $(".selectAndMultiShow").hide();
          $(".checkboxRadioShow").show();
          formName = "radioForm";
        } else if (thePlugin === "select") {
          $(".selectMultiShow").hide();
          $(".selectAndMultiShow").show();
          $(".checkboxRadioShow").hide();
          formName = "selectForm";
        } else if (thePlugin === "selectmulti") {
          $(".selectMultiShow").show();
          $(".selectAndMultiShow").show();
          $(".checkboxRadioShow").hide();
          formName = "selectMultiForm";
        }
        $("form").attr("id", formName);
        var inputType =
          formName == "selectForm" || formName == "radioForm"
            ? "radio"
            : "checkbox";
        for (var i = 0; i < $("input[name='defaultOption']").length; i++) {
          $("input[name='defaultOption']")[i].setAttribute("type", inputType);
        }
      }
      $("#metaData").change(function (){
        if ($(this).val() == '') {
          $(".option-tr").remove();
        }
      })
      $("input[name='isRange']").change(function (){
        // if ($(this).val() == 'isCustRange') {
          // $("#metaData").val('');
          // $(".option-tr").remove();
          // $("#metaDataId").val('')
        // }
      })
    </script>
  </body>
</html>
